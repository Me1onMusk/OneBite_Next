
import type { Metadata } from "next";
import "./globals.css";
import Link from "next/link";
import style from './layout.module.css';
import { BookData } from "@/types_db";

export const metadata: Metadata = {
  title: "ν•μ… λ¶μ¤",
  description: "Generated by create next app"
};

// ν‘Έν„° // 
async function Footer() {
    const response = await fetch(`${process.env.NEXT_PUBLIC_API_SERVER_URL}/book`, {cache: "force-cache"});  //μλ™μΌλ΅ cache μ €μ¥X -> λ™μ  νμ΄μ§€ 
    if(!response.ok) return <footer> μ μ‘ @Kim </footer>

    const books : BookData[] = await response.json();
    const bookCount = books.length;
    
    return (
        <footer>
            <div>μ μ‘ @Kim</div>
            <div>{bookCount}κ°μ λ„μ„κ°€ λ“±λ΅λμ–΄ μμµλ‹λ‹¤.</div> 
        </footer>
    );
};

// λ©”μΈ // 
export default function RootLayout({children,}: Readonly<{children: React.ReactNode;}>) {
    return (
        <html lang="kr">
        <body>
            <div className={style.container}>
                <header>
                    <Link href={'/'}>π“OneBite Books</Link>
                </header>
                <main>
                    {children}
                </main>
                <Footer />
            </div>
        </body>
        </html>
    );
}